syntax = "proto3";
package gateway;
import "hyweb.proto";

message Empty {}

message TokenMessage {
    string token = 1;
}

message Instance {
    hyweb.Instance instance = 1;
    string token = 2;
}

message ServiceTransport {
    message Hash {
        bytes type = 1;
        bytes value = 2;
    }
    oneof oneOf{
        hyweb.HashTag.Hash hash = 1;
        hyweb.Service service = 2;
    }
    optional hyweb.Configuration config = 3;
}

service Gateway {
    rpc StartService( stream ServiceTransport) returns (Instance) {}
    rpc StopService( TokenMessage ) returns (Empty) {}
}