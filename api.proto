syntax = "proto3";

import "onnx.proto";
import "ipss.proto";

// Solver
message Interpretation {
    repeated int32 variable = 1;
}


// Random
message Clause {
    repeated int32 literal = 1;
}

message Cnf {
    repeated Clause clause = 1;
}

message WhoAreYourParams {}

service Random {
    rpc RandomCnf(WhoAreYourParams) returns (Cnf) {}
}


// Service
message ServiceExtended {
    ipss.Multihash multihash = 1;
    ipss.Service service = 2;
}

message File {
    string file = 1;
}

service Solver {
    rpc StartTrain ( WhoAreYourParams) returns (WhoAreYourParams) {}
    rpc StopTrain ( WhoAreYourParams) returns (WhoAreYourParams) {}
    rpc GetTensor ( WhoAreYourParams) returns (stream onnx.ONNX) {}
    rpc UploadSolver (ServiceExtended) returns (WhoAreYourParams) {}
    rpc StreamLogs (WhoAreYourParams) returns (stream File){}
    rpc Solve(Cnf) returns (Interpretation) {}
}